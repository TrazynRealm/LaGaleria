<main class="mx-auto max-w-7xl flex-1 w-full">
    <section class="grid gap-4 md:gap-8 p-4 md:p-6">
        <div class="px-8 py-4 rounded-lg border bg-header-registro2 text-white shadow-sm">
            <!-- ENCABEZADO -->
            <div class="grid items-center mb-2">
                <!-- PARTE A -->
                <!-- TÍTULO -->
                <h1 class="text-3xl font-semibold text-yellow-500 mb-1">CHECKOUT</h1>
                <!-- SUBTÍTULO -->
                <h2 class="text-xl font-semibold text-yellow-500">Tus productos</h2>
            </div>
            <!-- CONTENIDO -->
            <div class=" px-4 py-8 text-center bg-header-registro border-2 rounded-lg grid grid-cols-5">
                <!-- PARTE IZQ -->
                <div class="col-span-2 grid text-start">
                    <form action="/checkout/process" method="POST" class="grid items-center">
                        <!-- Información del comprador -->
                        <div class="ps-5 grid grid-cols-1 justify-start pb-4">
                            <h2 class="text-xl font-bold text-yellow-500">Información del comprador</h2>
                            <div class="grid grid-cols-3 items-center">
                                <label for="name">Nombre completo</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text" id="name"
                                    name="name" required>
                            </div>
                        </div>
                        <!-- Información de la dirección -->
                        <div class="ps-5 grid grid-cols-1 justify-start pb-4">
                            <h2 class="text-xl font-bold text-yellow-500">Dirección de envío</h2>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="address">Dirección</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text"
                                    id="address" name="address" required>
                            </div>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="city">Ciudad</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text" id="city"
                                    name="city" required>
                            </div>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="state">Estado/Provincia</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text" id="state"
                                    name="state" required>
                            </div>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="zip">Código Postal</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text" id="zip"
                                    name="zip" required>
                            </div>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="country">País</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text"
                                    id="country" name="country" required>
                            </div>
                        </div>
                        <!-- Información del pago -->
                        <div class="ps-5 grid grid-cols-1 justify-start pb-4">
                            <h2 class="text-xl font-bold text-yellow-500">Información de Pago</h2>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="cardName">Nombre</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text"
                                    id="cardName" name="cardName" required>
                            </div>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="cardNumber">Nº tarjeta</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text"
                                    id="cardNumber" name="cardNumber" required>
                            </div>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="expiryDate">Fecha exp</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text"
                                    id="expiryDate" name="expiryDate" required>
                            </div>
                            <div class="grid grid-cols-3 items-center">
                                <label class="flex justify-end pe-4" for="cvv">CVV</label>
                                <input class="bg-header-registro px-4 my-2 rounded-lg col-span-2" type="text" id="cvv"
                                    name="cvv" required>
                            </div>
                        </div>
                        <!-- ENVIAR DATOS -->
                        <div class="flex justify-center pt-4">
                            <button type="submit"
                                class=" bg-header-registro border-2 border-white text-white py-1 px-4 rounded-lg hover:bg-gradient-to-t from-header-negro to-header-registro2 hover:border-yellow-500">
                                Procesar Pago
                            </button>
                        </div>
                    </form>
                </div>
                <!-- PARTE DCHA -->
                <div class="col-span-3 justify-end grid">
                    <div>
                        <table>
                            <thead>
                                <tr>
                                    <th class="px-4">Producto</th>
                                    <th class="px-4">Cantidad</th>
                                    <th class="px-4">Precio unitario (€)</th>
                                    <th class="px-4">Subtotal (€)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% cart.products.forEach(item=> { %>
                                    <tr>
                                        <td class="text-start">
                                            <%= item.product.name %>
                                        </td>
                                        <td>
                                            <%= item.quantity %>
                                        </td>
                                        <td>
                                            <%= item.product.price.toFixed(2) %>
                                        </td>
                                        <td>
                                            <%= (item.product.price * item.quantity).toFixed(2) %>
                                        </td>
                                    </tr>
                                    <% }); %>
                            </tbody>
                        </table>
                        <hr>
                        <h3 class="flex justify-end py-2 text-yellow-500 text-xl">Total: <%=
                                cart.products.reduce((total, item)=> total + item.product.price * item.quantity,
                                0).toFixed(2) %> €
                        </h3>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>